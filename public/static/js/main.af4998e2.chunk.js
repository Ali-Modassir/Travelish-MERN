(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],Array(19).concat([function(e,t,n){},,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a,c=n(0),r=n(1),s=n.n(r),i=n(11),l=n.n(i),o=(n(32),n(4)),u=n(8),d=n(3),j=n.n(d),b=n(9),p=n(2),O=(n(34),function(e){return Object(c.jsx)("div",{className:"card ".concat(e.className),style:e.style,children:e.children})}),h=(n(35),n(36),function(e){return Object(c.jsx)("div",{className:"avatar ".concat(e.className),style:e.style,children:Object(c.jsx)("img",{src:e.image,alt:e.alt,style:{width:e.width,height:e.width}})})}),m=function(e){return Object(c.jsx)("li",{className:"user-item",children:Object(c.jsx)(O,{className:"user-item__content",children:Object(c.jsxs)(u.b,{to:"/".concat(e.id,"/places"),children:[Object(c.jsx)("div",{className:"user-item__image",children:Object(c.jsx)(h,{image:"https://travelish-mern.herokuapp.com"+"/".concat(e.image),alt:e.name})}),Object(c.jsxs)("div",{className:"user-item__info",children:[Object(c.jsx)("h2",{children:e.name}),Object(c.jsxs)("h3",{children:[e.placeCount," ",1===e.placeCount?"Place":"Places"]})]})]})})})},x=(n(42),function(e){return 0===e.items.length?Object(c.jsx)("div",{className:"center",children:Object(c.jsx)(O,{children:Object(c.jsx)("h2",{children:"No Users Found"})})}):Object(c.jsx)("ul",{className:"users-list",children:e.items.map((function(e){return Object(c.jsx)(m,{id:e.id,image:e.image,name:e.name,placeCount:e.places.length},e.id)}))})}),f=n(7),v=n(58),g=(n(43),n(44),function(e){return l.a.createPortal(Object(c.jsx)("div",{className:"backdrop",onClick:e.onClick}),document.getElementById("backdrop-hook"))}),N=function(e){var t=Object(c.jsxs)("div",{className:"modal ".concat(e.className),style:e.style,children:[Object(c.jsx)("header",{className:"modal__header ".concat(e.headerClass),children:Object(c.jsx)("h2",{children:e.header})}),Object(c.jsxs)("form",{onSubmit:e.onSubmit?e.onSubmit:function(e){return e.preventDefault()},children:[Object(c.jsx)("div",{className:"modal__content ".concat(e.contentClass),children:e.children}),Object(c.jsx)("footer",{className:"modal__footer ".concat(e.footerClass),children:e.footer})]})]});return l.a.createPortal(t,document.getElementById("modal-hook"))},k=function(e){return Object(c.jsxs)(s.a.Fragment,{children:[e.show&&Object(c.jsx)(g,{onClick:e.onCancel}),Object(c.jsx)(v.a,{in:e.show,mountOnEnter:!0,unmountOnExit:!0,timeout:200,classNames:"modal",children:Object(c.jsx)(N,Object(f.a)({},e))})]})},C=(n(45),function(e){return e.href?Object(c.jsx)("a",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),href:e.href,children:e.children}):e.to?Object(c.jsx)(u.b,{to:e.to,exact:e.exact,className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),children:e.children}):Object(c.jsx)("button",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),type:e.type,onClick:e.onClick,disabled:e.disabled,children:e.children})}),y=function(e){return Object(c.jsx)(k,{onCancel:e.onClear,header:"An Error Occurred!",show:!!e.error,footer:Object(c.jsx)(C,{onClick:e.onClear,children:"Okay"}),children:Object(c.jsx)("p",{children:e.error})})},w=(n(46),function(e){return Object(c.jsx)("div",{className:"".concat(e.asOverlay&&"loading-spinner__overlay"),children:Object(c.jsx)("div",{className:"lds-dual-ring"})})}),I=function(){var e=Object(r.useState)(!1),t=Object(p.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(),s=Object(p.a)(c,2),i=s[0],l=s[1],o=Object(r.useRef)([]),u=Object(r.useCallback)(function(){var e=Object(b.a)(j.a.mark((function e(t){var n,c,r,s,i,u,d=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:"GET",c=d.length>2&&void 0!==d[2]?d[2]:null,r=d.length>3&&void 0!==d[3]?d[3]:{},a(!0),s=new AbortController,o.current.push(s),e.prev=6,e.next=9,fetch(t,{method:n,body:c,headers:r,signal:s.signal});case 9:return i=e.sent,e.next=12,i.json();case 12:if(u=e.sent,o.current=o.current.filter((function(e){return e!==s})),i.ok){e.next=16;break}throw new Error(u.message);case 16:return a(!1),e.abrupt("return",u);case 20:throw e.prev=20,e.t0=e.catch(6),l(e.t0.message),a(!1),e.t0;case 25:case"end":return e.stop()}}),e,null,[[6,20]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(r.useEffect)((function(){return function(){o.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:n,error:i,sendRequest:u,clearError:function(){l(null)}}},E=function(){var e=Object(r.useState)(),t=Object(p.a)(e,2),n=t[0],a=t[1],i=I(),l=i.isLoading,o=i.error,u=i.sendRequest,d=i.clearError;return Object(r.useEffect)((function(){(function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u("https://travelish-mern.herokuapp.com/api/users");case 3:t=e.sent,a(t.users),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[u]),Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)(y,{error:o,onClear:d}),l&&Object(c.jsx)("div",{className:"center",children:Object(c.jsx)(w,{})}),!l&&n&&Object(c.jsx)(x,{items:n})]})},T=(n(19),n(24)),S="REQUIRE",_="MINLENGTH",V="MAXLENGTH",D="EMAIL",A=function(){return{type:S}},P=function(e){return{type:_,val:e}},L=function(e,t){var n,a=!0,c=Object(T.a)(t);try{for(c.s();!(n=c.n()).done;){var r=n.value;r.type===S&&(a=a&&e.trim().length>0),r.type===_&&(a=a&&e.trim().length>=r.val),r.type===V&&(a=a&&e.trim().length<=r.val),"MIN"===r.type&&(a=a&&+e>=r.val),"MAX"===r.type&&(a=a&&+e<=r.val),r.type===D&&(a=a&&/^\S+@\S+\.\S+$/.test(e))}}catch(s){c.e(s)}finally{c.f()}return a},R=(n(47),function(e,t){switch(t.type){case"CHANGE":return Object(f.a)(Object(f.a)({},e),{},{value:t.val,isValid:L(t.val,t.validators)});case"TOUCH":return Object(f.a)(Object(f.a)({},e),{},{isTouch:!0});default:return e}}),F=function(e){var t=Object(r.useReducer)(R,{value:e.initialValue||"",isValid:e.initialValid||!1,isTouch:!1}),n=Object(p.a)(t,2),a=n[0],s=n[1],i=e.id,l=e.onInput,o=a.value,u=a.isValid;Object(r.useEffect)((function(){l(i,o,u)}),[i,o,u,l]);var d=function(){s({type:"TOUCH"})},j=function(t){s({type:"CHANGE",val:t.target.value,validators:e.validators})},b="input"===e.element?Object(c.jsx)("input",{id:e.id,type:e.type,placeholder:e.placeholder,onChange:j,value:a.value,onBlur:d}):Object(c.jsx)("textarea",{id:e.id,rows:e.rows||3,onChange:j,value:a.value,onBlur:d});return Object(c.jsxs)("div",{className:"form-control ".concat(!a.isValid&&a.isTouch&&"form-control--invalid"),children:[Object(c.jsx)("label",{htmlFor:e.id,children:e.label}),b,!a.isValid&&a.isTouch&&Object(c.jsx)("p",{children:e.errorText})]})},G=n(15),M=function(e,t){switch(t.type){case"INPUT_CHANGE":var n=!0;for(var a in e.inputs)e.inputs[a]&&(n=a===t.inputId?n&&t.isValid:n&&e.inputs[a].isValid);return Object(f.a)(Object(f.a)({},e),{},{inputs:Object(f.a)(Object(f.a)({},e.inputs),{},Object(G.a)({},t.inputId,{value:t.value,isValid:t.isValid})),isValid:n});case"SET_DATA":return{inputs:t.inputs,isValid:t.formIsValid};default:return e}},U=function(e,t){var n=Object(r.useReducer)(M,{inputs:e,isValid:!1}),a=Object(p.a)(n,2),c=a[0],s=a[1];return[c,Object(r.useCallback)((function(e,t,n){s({type:"INPUT_CHANGE",value:t,isValid:n,inputId:e})}),[]),Object(r.useCallback)((function(e,t){s({type:"SET_DATA",inputs:e,formIsValid:t})}),[])]},H=Object(r.createContext)({isLoggedIn:!1,userId:null,token:null,login:function(){},logout:function(){}}),z=(n(48),function(e){var t=Object(r.useState)(),n=Object(p.a)(t,2),a=n[0],s=n[1],i=Object(r.useState)(),l=Object(p.a)(i,2),o=l[0],u=l[1],d=Object(r.useState)(!1),j=Object(p.a)(d,2),b=j[0],O=j[1],h=Object(r.useRef)();Object(r.useEffect)((function(){if(a){var e=new FileReader;e.onload=function(){u(e.result)},e.readAsDataURL(a)}}),[a]);return Object(c.jsxs)("div",{className:"form-control",children:[Object(c.jsx)("input",{id:e.id,ref:h,style:{display:"none"},type:"file",accept:".jpg,.png,.jpeg",onChange:function(t){var n,a=b;t.target.files&&1===t.target.files.length?(n=t.target.files[0],s(n),O(!0),a=!0):(O(!1),a=!1),e.onInput(e.id,n,a)}}),Object(c.jsxs)("div",{className:"image-upload ".concat(e.center&&"center"," "),children:[Object(c.jsxs)("div",{className:"image-upload__preview",children:[o&&Object(c.jsx)("img",{src:o,alt:"Preview"}),!o&&Object(c.jsx)("p",{children:"Please pick an Image"})]}),Object(c.jsx)(C,{type:"button",onClick:function(){h.current.click()},children:"PICK IMAGE"})]}),!b&&Object(c.jsx)("p",{children:e.errorText})]})}),B=function(){var e=Object(o.g)(),t=I(),n=t.isLoading,a=t.error,i=t.sendRequest,l=t.clearError,u=Object(r.useContext)(H),d=U({title:{value:"",isValid:!1},description:{value:"",isValid:!1},address:{value:"",isValid:!1},image:{value:null,isValid:!1}}),O=Object(p.a)(d,2),h=O[0],m=O[1],x=function(){var t=Object(b.a)(j.a.mark((function t(n){var a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,(a=new FormData).append("title",h.inputs.title.value),a.append("description",h.inputs.description.value),a.append("address",h.inputs.address.value),a.append("image",h.inputs.image.value),a.append("creator",u.userId),t.next=10,i("https://travelish-mern.herokuapp.com/api/places","POST",a,{Authorization:"Bearer "+u.token});case 10:e.push("/"),t.next=15;break;case 13:t.prev=13,t.t0=t.catch(1);case 15:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}();return Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)(y,{error:a,onClear:l}),Object(c.jsxs)("form",{className:"place-form",onSubmit:x,children:[n&&Object(c.jsx)(w,{asOverlay:!0}),Object(c.jsx)(F,{id:"title",element:"input",type:"text",label:"Title",validators:[A()],errorText:"Please enter a valid title",onInput:m}),Object(c.jsx)(F,{id:"description",element:"textarea",label:"Description",validators:[A(),P(5)],errorText:"Please enter a valid description (at least 5 characters)",onInput:m}),Object(c.jsx)(F,{id:"address",element:"input",label:"Address",validators:[A()],errorText:"Please enter a valid Address",onInput:m}),Object(c.jsx)(z,{center:!0,id:"image",onInput:m}),Object(c.jsx)(C,{type:"submit",disabled:!h.isValid,children:"ADD PLACE"})]})]})},q=(n(49),n(50),function(e){return Object(c.jsx)("header",{className:"main-header",children:e.children})}),J=(n(51),function(e){var t=Object(r.useContext)(H);return Object(c.jsxs)("ul",{className:"nav-links",children:[Object(c.jsx)("li",{children:Object(c.jsx)(u.c,{to:"/",exact:!0,children:"ALL USERS"})}),Object(c.jsx)("li",{children:t.isLoggedIn&&Object(c.jsx)(u.c,{to:"/".concat(t.userId,"/places"),children:"MY PLACES"})}),Object(c.jsx)("li",{children:t.isLoggedIn&&Object(c.jsx)(u.c,{to:"/places/new",children:"ADD PLACE"})}),Object(c.jsx)("li",{children:!t.isLoggedIn&&Object(c.jsx)(u.c,{to:"/auth",children:"AUTHENTICATE"})}),t.isLoggedIn&&Object(c.jsx)("li",{children:Object(c.jsx)("button",{onClick:t.logout,children:"LOGOUT"})})]})}),W=(n(52),function(e){var t=Object(c.jsx)(v.a,{in:e.show,timeout:200,classNames:"slide-in-left",mountOnEnter:!0,unmountOnExit:!0,children:Object(c.jsx)("aside",{className:"side-drawer",onClick:e.onClick,children:e.children})});return l.a.createPortal(t,document.getElementById("drawer-hook"))}),X=function(e){var t=Object(r.useState)(!1),n=Object(p.a)(t,2),a=n[0],i=n[1],l=function(){i(!1)};return Object(c.jsxs)(s.a.Fragment,{children:[a&&Object(c.jsx)(g,{onClick:l}),Object(c.jsx)(W,{show:a,onClick:l,children:Object(c.jsx)("nav",{className:"main-navigation__drawer-nav",children:Object(c.jsx)(J,{})})}),Object(c.jsxs)(q,{children:[Object(c.jsxs)("button",{className:"main-navigation__menu-btn",onClick:function(){i(!0)},children:[Object(c.jsx)("span",{}),Object(c.jsx)("span",{}),Object(c.jsx)("span",{})]}),Object(c.jsx)("h1",{className:"main-navigation__title",children:Object(c.jsx)(u.b,{to:"/",children:"Travelish"})}),Object(c.jsx)("nav",{className:"main-navigation__header-nav",children:Object(c.jsx)(J,{})})]})]})},Y=(n(53),n(54),n(55),function(e){var t=Object(r.useRef)(),n=e.zoom,a=e.center;return Object(r.useEffect)((function(){var e=new window.google.maps.Map(t.current,{center:a,zoom:n});new window.google.maps.Marker({position:a,map:e})}),[n,a]),Object(c.jsx)("div",{ref:t,className:"map ".concat(e.className),style:e.style})}),K=function(e){var t=Object(r.useContext)(H),n=Object(r.useState)(!1),a=Object(p.a)(n,2),i=a[0],l=a[1],o=I(),u=o.isLoading,d=o.error,h=o.sendRequest,m=o.clearError,x=Object(r.useState)(!1),f=Object(p.a)(x,2),v=f[0],g=f[1],N=function(){return l(!1)},E=function(){g(!1)},T=function(){var n=Object(b.a)(j.a.mark((function n(){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return g(!1),n.prev=1,n.next=4,h("https://travelish-mern.herokuapp.com/api"+"/places/".concat(e.id),"DELETE",null,{Authorization:"Bearer "+t.token});case 4:e.onDelete(e.id),n.next=9;break;case 7:n.prev=7,n.t0=n.catch(1);case 9:case"end":return n.stop()}}),n,null,[[1,7]])})));return function(){return n.apply(this,arguments)}}();return Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)(y,{error:d,onClear:m}),Object(c.jsx)(k,{show:i,onCancel:N,header:e.address,contentClass:"place-item__modal-content",footerClass:"place-item__modal-actions",footer:Object(c.jsx)(C,{onClick:N,children:"CLOSE"}),children:Object(c.jsx)("div",{className:"map-container",children:Object(c.jsx)(Y,{center:e.coordinates,zoom:16})})}),Object(c.jsx)(k,{show:v,onCancel:E,header:"Are you sure?",footerClass:"place-item__modal-actions",footer:Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)(C,{inverse:!0,onClick:E,children:"CANCEL"}),Object(c.jsx)(C,{danger:!0,onClick:T,children:"DELETE"})]}),children:Object(c.jsx)("p",{children:"Do you want to proceed and delelte this place ? Please Note that it can't be undone thereafter."})}),Object(c.jsx)("li",{className:"place-item",children:Object(c.jsxs)(O,{className:"place-item__content",children:[u&&Object(c.jsx)(w,{asOverlay:!0}),Object(c.jsx)("div",{className:"place-item__image",children:Object(c.jsx)("img",{src:"https://travelish-mern.herokuapp.com"+"/".concat(e.image),alt:e.title})}),Object(c.jsxs)("div",{className:"place-item__info",children:[Object(c.jsx)("h2",{children:e.title}),Object(c.jsx)("h3",{children:e.address}),Object(c.jsx)("p",{children:e.description})]}),Object(c.jsxs)("div",{className:"place-item__actions",children:[Object(c.jsx)(C,{inverse:!0,onClick:function(){return l(!0)},children:"VIEW ON MAP"}),t.userId===e.creatorID&&Object(c.jsx)(C,{to:"/places/".concat(e.id),children:"EDIT"}),t.userId===e.creatorID&&Object(c.jsx)(C,{danger:!0,onClick:function(){g(!0)},children:"DELETE"})]})]})})]})},Q=function(e){return 0===e.items.length?Object(c.jsx)("div",{className:"place-list center",children:Object(c.jsxs)(O,{children:[Object(c.jsx)("h2",{children:"No places found. Maybe Create One?"}),Object(c.jsx)(C,{to:"/places/new",children:"Share Place"})]})}):Object(c.jsx)("ul",{className:"place-list",children:e.items.map((function(t){return Object(c.jsx)(K,{id:t.id,title:t.title,image:t.image,description:t.description,address:t.address,creatorID:t.creator,coordinates:t.location,onDelete:e.onDelete},t.id)}))})},$=function(){var e=I(),t=e.isLoading,n=e.error,a=e.sendRequest,i=e.clearError,l=Object(r.useState)([]),u=Object(p.a)(l,2),d=u[0],O=u[1],h=Object(o.h)().userid;Object(r.useEffect)((function(){(function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a("https://travelish-mern.herokuapp.com/api"+"/places/users/".concat(h));case 3:t=e.sent,O(t.places),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[a,h]);return Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)(y,{error:n,onClear:i}),t&&Object(c.jsx)("div",{className:"center",children:Object(c.jsx)(w,{})}),!t&&d&&Object(c.jsx)(Q,{items:d,onDelete:function(e){O((function(t){return t.filter((function(t){return t.id!==e}))}))}})]})},Z=function(){var e=I(),t=e.isLoading,n=e.error,a=e.sendRequest,i=e.clearError,l=Object(r.useState)(),u=Object(p.a)(l,2),d=u[0],O=u[1],h=Object(o.h)().placeId,m=Object(o.g)(),x=Object(r.useContext)(H),f=U({title:{value:"",isValid:!1},description:{value:"",isValid:!1}}),v=Object(p.a)(f,3),g=v[0],N=v[1],k=v[2];Object(r.useEffect)((function(){(function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a("https://travelish-mern.herokuapp.com/api"+"/places/".concat(h));case 3:t=e.sent,O(t.place),k({title:{value:t.title,isValid:!0},description:{value:t.description,isValid:!0}},!0),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[a,h,k]);var E=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,a("https://travelish-mern.herokuapp.com/api"+"/places/".concat(h),"PATCH",JSON.stringify({title:g.inputs.title.value,description:g.inputs.description.value}),{"Content-Type":"application/json",Authorization:"Bearer "+x.token});case 4:m.push("/"),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return t?Object(c.jsx)("div",{className:"center",children:Object(c.jsx)(w,{})}):d||n?Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)(y,{error:n,onClear:i}),!t&&d&&Object(c.jsxs)("form",{className:"place-form",onSubmit:E,children:[Object(c.jsx)(F,{id:"title",element:"input",type:"text",label:"Title",validators:[A()],errorText:"Please Enter a valid title",onInput:N,initialValue:d.title,initialValid:!0}),Object(c.jsx)(F,{id:"description",element:"textarea",type:"Description",label:"Title",validators:[A(),P(5)],errorText:"Please Enter a valid description (min 5.character)",onInput:N,initialValue:d.description,initialValid:!0}),Object(c.jsx)(C,{type:"submit",disabled:!g.isValid,children:"UPDATE PLACE"})]})]}):Object(c.jsx)("div",{className:"center",children:Object(c.jsx)("h2",{children:"Could Not find that place"})})},ee=(n(56),function(){var e=Object(r.useContext)(H),t=Object(r.useState)(!0),n=Object(p.a)(t,2),a=n[0],i=n[1],l=I(),o=l.isLoading,u=l.error,d=l.sendRequest,h=l.clearError,m=U({email:{value:"",isValid:!1},password:{value:"",isValid:!1}}),x=Object(p.a)(m,3),v=x[0],g=x[1],N=x[2],k=function(){var t=Object(b.a)(j.a.mark((function t(n){var c,r,s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),!a){t.next=13;break}return t.prev=2,t.next=5,d("http://localhost:5000/api/users/login","POST",JSON.stringify({email:v.inputs.email.value,password:v.inputs.password.value}),{"Content-Type":"application/json"});case 5:c=t.sent,e.login(c.userId,c.token),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(2);case 11:t.next=27;break;case 13:return t.prev=13,(r=new FormData).append("email",v.inputs.email.value),r.append("name",v.inputs.name.value),r.append("password",v.inputs.password.value),r.append("image",v.inputs.image.value),t.next=21,d("http://localhost:5000/api/users/signup","POST",r);case 21:s=t.sent,e.login(s.userId,s.token),t.next=27;break;case 25:t.prev=25,t.t1=t.catch(13);case 27:case"end":return t.stop()}}),t,null,[[2,9],[13,25]])})));return function(e){return t.apply(this,arguments)}}();return Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)(y,{error:u,onClear:h}),Object(c.jsxs)(O,{className:"authentication",children:[o&&Object(c.jsx)(w,{asOverlay:!0}),Object(c.jsx)("h2",{children:"Login Required"}),Object(c.jsx)("hr",{}),Object(c.jsxs)("form",{onSubmit:k,children:[!a&&Object(c.jsx)(F,{element:"input",id:"name",type:"text",label:"Your Name",validators:[A()],errorText:"Please enter a name.",onInput:g}),!a&&Object(c.jsx)(z,{center:!0,id:"image",onInput:g,errorText:"Please provide an image."}),Object(c.jsx)(F,{element:"input",id:"email",type:"email",label:"E-Mail",validators:[{type:D}],errorText:"Please enter a valid email address.",onInput:g}),Object(c.jsx)(F,{element:"input",id:"password",type:"password",label:"Password",validators:[P(6)],errorText:"Please enter a valid password, at least 6 characters.",onInput:g}),Object(c.jsx)(C,{type:"submit",disabled:!v.isValid,children:a?"LOGIN":"SIGNUP"})]}),Object(c.jsxs)(C,{inverse:!0,onClick:function(){a?N(Object(f.a)(Object(f.a)({},v.inputs),{},{name:{value:"",isValid:!1},image:{value:null,isValid:!1}}),!1):N(Object(f.a)(Object(f.a)({},v.inputs),{},{name:void 0,image:void 0}),v.inputs.email.isValid&&v.inputs.password.isValid),i((function(e){return!e}))},children:["SWITCH TO ",a?"SIGNUP":"LOGIN"]})]})]})}),te=function(){var e,t=function(){var e=Object(r.useState)(!1),t=Object(p.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(),i=Object(p.a)(s,2),l=i[0],o=i[1],u=Object(r.useState)(!1),d=Object(p.a)(u,2),j=d[0],b=d[1],O=Object(r.useCallback)((function(e,t,n){c(t),b(e);var a=n||new Date((new Date).getTime()+36e5);o(a),localStorage.setItem("userData",JSON.stringify({userId:e,token:t,expiration:a.toISOString()}))}),[]),h=Object(r.useCallback)((function(){c(null),o(null),b(null),localStorage.removeItem("userData")}),[]);return Object(r.useEffect)((function(){if(n&&l){var e=l.getTime()-(new Date).getTime();a=setTimeout(h,e)}else clearTimeout(a)}),[n,h,l]),Object(r.useEffect)((function(){var e=null;localStorage.getItem("userData")&&(e=JSON.parse(JSON.stringify(localStorage.getItem("userData")))),e&&e.token&&new Date(e.expiration)>new Date&&O(e.userId,e.token,new Date(e.expiration))}),[O]),{token:n,login:O,logout:h,userId:j}}(),n=t.token,s=t.login,i=t.logout,l=t.userId;return e=n?Object(c.jsxs)(o.d,{children:[Object(c.jsx)(o.b,{path:"/",exact:!0,children:Object(c.jsx)(E,{})}),Object(c.jsx)(o.b,{path:"/:userid/places",exact:!0,children:Object(c.jsx)($,{})}),Object(c.jsx)(o.b,{path:"/places/new",children:Object(c.jsx)(B,{})}),Object(c.jsx)(o.b,{path:"/places/:placeId",children:Object(c.jsx)(Z,{})}),Object(c.jsx)(o.a,{to:"/"})]}):Object(c.jsxs)(o.d,{children:[Object(c.jsx)(o.b,{path:"/",exact:!0,children:Object(c.jsx)(E,{})}),Object(c.jsx)(o.b,{path:"/:userid/places",exact:!0,children:Object(c.jsx)($,{})}),Object(c.jsx)(o.b,{path:"/auth",children:Object(c.jsx)(ee,{})}),Object(c.jsx)(o.a,{to:"/auth"})]}),Object(c.jsx)(H.Provider,{value:{isLoggedIn:!!n,token:n,logout:i,login:s,userId:l},children:Object(c.jsxs)(u.a,{children:[Object(c.jsx)(X,{}),Object(c.jsx)("main",{children:e})]})})};l.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(te,{})}),document.getElementById("root"))}]),[[57,1,2]]]);
//# sourceMappingURL=main.af4998e2.chunk.js.map